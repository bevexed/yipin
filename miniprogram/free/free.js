"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = require("../api/index");
Page({
    data: {
        token: '',
        serial_number: '',
        phone: '',
        code: '',
        list: [],
        array: [],
        list2: [],
        array2: [],
        multiArray: [[], []],
        multiIndex: [0, 0],
        index: 0,
        msgData: '获取验证码',
        time: 60,
        timer: 0,
        active: ''
    },
    onLoad: function () {
        var _this = this;
        wx.getStorage({
            key: 'token',
            success: function (res) {
                console.log(res);
                _this.setData({
                    token: res.data
                });
            }
        });
        this.getPhoneModels();
    },
    bindMultiPickerChange: function (e) {
        console.log('picker发送选择改变，携带值为', e.detail.value);
        this.setData({
            multiIndex: e.detail.value
        });
        console.log(this.data.multiIndex);
    },
    bindMultiPickerColumnChange: function (e) {
        console.log('修改的列为', e.detail.column, '，值为', e.detail.value);
        if (e.detail.column === 0) {
            var _b = this.data, list = _b.list, array = _b.array;
            this.setData({
                multiArray: [array, list[e.detail.value]["subclass"].map(function (item) { return item.name; })]
            });
        }
    },
    input: function (e) {
        var _b;
        console.log(e);
        var label = e.target.dataset.type;
        var value = e.detail.detail.value;
        console.log(value);
        this.setData((_b = {},
            _b[label] = value,
            _b));
        console.log(label, value);
    },
    getPhoneModels: function () {
        var _this_1 = this;
        index_1.reqPhoneModels().then(function (res) {
            if (res.code === 1) {
                console.log('get-phone-models', res);
                _this_1.setData({
                    list: res.data,
                    array: res.data.map(function (item) { return item.name; }),
                    list2: res.data[0].subclass,
                    array2: res.data[0].subclass.map(function (item) { return item.name; }),
                    multiArray: [res.data.map(function (item) { return item.name; }), res.data[0].subclass.map(function (item) { return item.name; })]
                });
            }
        });
    },
    changeCode: function (e) {
        console.log(e);
        this.setData({
            code: e.detail.value
        });
        console.log(this.data.code);
    },
    doSendMsg: function () {
        var _this = this;
        var _a = this.data, time = _a.time, timer = _a.timer;
        if (timer !== 0) {
            return;
        }
        var mobile = this.data.phone;
        var type = 'SMS_166320348';
        index_1.sendMsg({ type: type, mobile: mobile }).then(function (res) {
            if (res.code === 1) {
                timer = setInterval(function () {
                    if (time === 0) {
                        clearInterval(timer);
                        _this.setData({
                            timer: 0,
                            time: 60,
                            msgData: '获取验证码',
                            active: ''
                        });
                        return;
                    }
                    time--;
                    _this.setData({
                        msgData: time + 's',
                        timer: timer,
                        active: 'active'
                    });
                }, 1000);
            }
        });
    },
    getFreeFilm: function () {
        var _b = this.data, token = _b.token, multiArray = _b.multiArray, multiIndex = _b.multiIndex, serial_number = _b.serial_number, phone = _b.phone, code = _b.code;
        var phone_model = multiArray[1][multiIndex[1]];
        console.log(phone_model);
        index_1.reqGetFreeFilm({ token: token, phone_model: phone_model, serial_number: serial_number, phone: phone, code: code }).then(function (res) {
            wx.showToast({
                title: res.message,
                icon: 'none',
                duration: 2000
            });
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJlZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZyZWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBcUU7QUFFckUsSUFBSSxDQUFDO0lBRUosSUFBSSxFQUFFO1FBRUwsS0FBSyxFQUFFLEVBQUU7UUFDVCxhQUFhLEVBQUMsRUFBRTtRQUNoQixLQUFLLEVBQUMsRUFBRTtRQUNSLElBQUksRUFBQyxFQUFFO1FBRVAsSUFBSSxFQUFDLEVBQUU7UUFDUCxLQUFLLEVBQUUsRUFBRTtRQUNULEtBQUssRUFBRSxFQUFFO1FBQ1QsTUFBTSxFQUFFLEVBQUU7UUFFVixVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUMsRUFBRSxDQUFDO1FBQ25CLFVBQVUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFbEIsS0FBSyxFQUFFLENBQUM7UUFFUixPQUFPLEVBQUUsT0FBTztRQUNoQixJQUFJLEVBQUUsRUFBRTtRQUNSLEtBQUssRUFBRSxDQUFDO1FBQ1IsTUFBTSxFQUFFLEVBQUU7S0FFVjtJQUVELE1BQU0sRUFBTjtRQUVDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQztRQUNqQixFQUFFLENBQUMsVUFBVSxDQUFDO1lBQ2IsR0FBRyxFQUFFLE9BQU87WUFDWixPQUFPLEVBQVAsVUFBUSxHQUFHO2dCQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2pCLEtBQUssQ0FBQyxPQUFRLENBQUM7b0JBQ2QsS0FBSyxFQUFFLEdBQUcsQ0FBQyxJQUFJO2lCQUNmLENBQUMsQ0FBQTtZQUNILENBQUM7U0FDRCxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUVELHFCQUFxQixFQUFFLFVBQVUsQ0FBTTtRQUN0QyxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDakQsSUFBSSxDQUFDLE9B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Q0FBQyxDQUFDO2FBQ1Q7UUFDRixDQUFDLENBQ0QsQ0FBQztJQUdILENBQUM7SUFFRCxXQUFXLEVBQVg7UUFDTyxJQUFBLGNBQWtFLEVBQWpFLGdCQUFLLEVBQUMsMEJBQVUsRUFBQywwQkFBVSxFQUFDLGdDQUFhLEVBQUMsZ0JBQUssRUFBQyxjQUFpQixDQUFDO1FBRXpFLElBQUksV0FBVyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvQyxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3pCLHNCQUFjLENBQUMsRUFBQyxLQUFLLE9BQUEsRUFBQyxXQUFXLGFBQUEsRUFBQyxhQUFhLGVBQUEsRUFBQyxLQUFLLE9BQUEsRUFBQyxJQUFJLE1BQUEsRUFBQyxDQUFDLENBQUMsSUFBSSxDQUNoRSxVQUFDLEdBQU87WUFDUCxFQUFFLENBQUMsU0FBUyxDQUFDO2dCQUNQLEtBQUssRUFBQyxHQUFHLENBQUMsT0FBTztnQkFDakIsSUFBSSxFQUFDLE1BQU07Z0JBQ1gsUUFBUSxFQUFDLElBQUk7YUFDZCxDQUFDLENBQUE7UUFDUCxDQUFDLENBQ0QsQ0FBQTtJQUNGLENBQUM7Q0FFRCxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3JlcUdldEZyZWVGaWxtLCByZXFQaG9uZU1vZGVscywgc2VuZE1zZ30gZnJvbSBcIi4uL2FwaS9pbmRleFwiO1xyXG5cclxuUGFnZSh7XHJcblxyXG5cdGRhdGE6IHtcclxuXHJcblx0XHR0b2tlbjogJycsXHJcblx0XHRzZXJpYWxfbnVtYmVyOicnLFxyXG5cdFx0cGhvbmU6JycsXHJcblx0XHRjb2RlOicnLFxyXG5cclxuXHRcdGxpc3Q6W10sXHJcblx0XHRhcnJheTogW10sXHJcblx0XHRsaXN0MjogW10sXHJcblx0XHRhcnJheTI6IFtdLFxyXG5cclxuXHRcdG11bHRpQXJyYXk6IFtbXSxbXV0sXHJcblx0XHRtdWx0aUluZGV4OiBbMCwgMF0sXHJcblxyXG5cdFx0aW5kZXg6IDAsXHJcblxyXG5cdFx0bXNnRGF0YTogJ+iOt+WPlumqjOivgeeggScsXHJcblx0XHR0aW1lOiA2MCxcclxuXHRcdHRpbWVyOiAwLFxyXG5cdFx0YWN0aXZlOiAnJ1xyXG5cclxuXHR9LFxyXG5cclxuXHRvbkxvYWQoKSB7XHJcblx0XHQvLyDor7vlj5Z0b2tlblxyXG5cdFx0bGV0IF90aGlzID0gdGhpcztcclxuXHRcdHd4LmdldFN0b3JhZ2Uoe1xyXG5cdFx0XHRrZXk6ICd0b2tlbicsXHJcblx0XHRcdHN1Y2Nlc3MocmVzKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzKTtcclxuXHRcdFx0XHRfdGhpcy5zZXREYXRhISh7XHJcblx0XHRcdFx0XHR0b2tlbjogcmVzLmRhdGFcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmdldFBob25lTW9kZWxzKCk7XHJcblx0fSxcclxuXHJcblx0YmluZE11bHRpUGlja2VyQ2hhbmdlOiBmdW5jdGlvbiAoZTogYW55KSB7XHJcblx0XHRjb25zb2xlLmxvZygncGlja2Vy5Y+R6YCB6YCJ5oup5pS55Y+Y77yM5pC65bim5YC85Li6JywgZS5kZXRhaWwudmFsdWUpO1xyXG5cdFx0dGhpcy5zZXREYXRhISh7XHJcblx0XHRcdG11bHRpSW5kZXg6IGUuZGV0YWlsLnZhbHVlXHJcblx0XHR9KVxyXG5cdFx0Y29uc29sZS5sb2codGhpcy5kYXRhLm11bHRpSW5kZXgpO1xyXG5cdH0sXHJcblxyXG5cdGJpbmRNdWx0aVBpY2tlckNvbHVtbkNoYW5nZTogZnVuY3Rpb24gKGU6IGFueSkge1xyXG5cdFx0Y29uc29sZS5sb2coJ+S/ruaUueeahOWIl+S4uicsIGUuZGV0YWlsLmNvbHVtbiwgJ++8jOWAvOS4uicsIGUuZGV0YWlsLnZhbHVlKTtcclxuXHRcdGlmIChlLmRldGFpbC5jb2x1bW4gPT09IDApIHtcclxuXHRcdFx0bGV0IHtsaXN0LCBhcnJheX0gPSB0aGlzLmRhdGE7XHJcblx0XHRcdHRoaXMuc2V0RGF0YSEoe1xyXG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdFx0XHRtdWx0aUFycmF5OiBbYXJyYXksIGxpc3RbZS5kZXRhaWwudmFsdWVdW1wic3ViY2xhc3NcIl0ubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKV1cclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHJcblx0aW5wdXQoZTogYW55KSB7XHJcblx0XHRjb25zb2xlLmxvZyhlKTtcclxuXHRcdGNvbnN0IGxhYmVsID0gZS50YXJnZXQuZGF0YXNldC50eXBlO1xyXG5cdFx0Y29uc3QgdmFsdWUgPSBlLmRldGFpbC5kZXRhaWwudmFsdWU7XHJcblx0XHRjb25zb2xlLmxvZyh2YWx1ZSk7XHJcblx0XHR0aGlzLnNldERhdGEhKHtcclxuXHRcdFx0W2xhYmVsXTogdmFsdWVcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKGxhYmVsLCB2YWx1ZSk7XHJcblx0fSxcclxuXHJcblxyXG5cdGdldFBob25lTW9kZWxzKCkge1xyXG5cdFx0cmVxUGhvbmVNb2RlbHMoKS50aGVuKFxyXG5cdFx0XHRyZXMgPT4ge1xyXG5cdFx0XHRcdGlmIChyZXMuY29kZSA9PT0gMSkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2dldC1waG9uZS1tb2RlbHMnLCByZXMpO1xyXG5cdFx0XHRcdFx0dGhpcy5zZXREYXRhISh7XHJcblx0XHRcdFx0XHRcdGxpc3Q6IHJlcy5kYXRhLFxyXG5cdFx0XHRcdFx0XHRhcnJheTogcmVzLmRhdGEubWFwKChpdGVtOiBhbnkpID0+IGl0ZW0ubmFtZSksXHJcblx0XHRcdFx0XHRcdGxpc3QyOiByZXMuZGF0YVswXS5zdWJjbGFzcyxcclxuXHRcdFx0XHRcdFx0YXJyYXkyOiByZXMuZGF0YVswXS5zdWJjbGFzcy5tYXAoKGl0ZW06IGFueSkgPT4gaXRlbS5uYW1lKSxcclxuXHRcdFx0XHRcdFx0bXVsdGlBcnJheTogW3Jlcy5kYXRhLm1hcCgoaXRlbTogYW55KSA9PiBpdGVtLm5hbWUpLCByZXMuZGF0YVswXS5zdWJjbGFzcy5tYXAoKGl0ZW06IGFueSkgPT4gaXRlbS5uYW1lKV1cclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fSxcclxuXHJcblx0Y2hhbmdlQ29kZTogZnVuY3Rpb24gKGU6IGFueSkge1xyXG5cdFx0Y29uc29sZS5sb2coZSk7XHJcblx0XHR0aGlzLnNldERhdGEhKHtcclxuXHRcdFx0Y29kZTogZS5kZXRhaWwudmFsdWVcclxuXHRcdH0pO1xyXG5cdFx0Y29uc29sZS5sb2codGhpcy5kYXRhLmNvZGUpO1xyXG5cdH0sXHJcblx0ZG9TZW5kTXNnOiBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdFx0dmFyIF9hID0gdGhpcy5kYXRhLCB0aW1lID0gX2EudGltZSwgdGltZXIgPSBfYS50aW1lcjtcclxuXHRcdGlmICh0aW1lciAhPT0gMCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gdG9kbzog5re75Yqg5a6e5pe255uR5o6nXHJcblxyXG5cdFx0Y29uc3QgbW9iaWxlID0gdGhpcy5kYXRhLnBob25lO1xyXG5cdFx0Y29uc3QgdHlwZSA9ICdTTVNfMTY2MzIwMzQ4JztcclxuXHRcdHNlbmRNc2coe3R5cGUsIG1vYmlsZX0pLnRoZW4oXHJcblx0XHRcdChyZXM6IGFueSkgPT4ge1xyXG5cdFx0XHRcdGlmIChyZXMuY29kZSA9PT0gMSkge1xyXG5cclxuXHRcdFx0XHRcdHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHRpZiAodGltZSA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG5cdFx0XHRcdFx0XHRcdF90aGlzLnNldERhdGEhKHtcclxuXHRcdFx0XHRcdFx0XHRcdHRpbWVyOiAwLFxyXG5cdFx0XHRcdFx0XHRcdFx0dGltZTogNjAsXHJcblx0XHRcdFx0XHRcdFx0XHRtc2dEYXRhOiAn6I635Y+W6aqM6K+B56CBJyxcclxuXHRcdFx0XHRcdFx0XHRcdGFjdGl2ZTogJydcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0dGltZS0tO1xyXG5cdFx0XHRcdFx0XHRfdGhpcy5zZXREYXRhISh7XHJcblx0XHRcdFx0XHRcdFx0bXNnRGF0YTogdGltZSArICdzJyxcclxuXHRcdFx0XHRcdFx0XHR0aW1lcjogdGltZXIsXHJcblx0XHRcdFx0XHRcdFx0YWN0aXZlOiAnYWN0aXZlJ1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHJcblxyXG5cdH0sXHJcblxyXG5cdGdldEZyZWVGaWxtKCkge1xyXG5cdFx0Y29uc3Qge3Rva2VuLG11bHRpQXJyYXksbXVsdGlJbmRleCxzZXJpYWxfbnVtYmVyLHBob25lLGNvZGV9ID0gdGhpcy5kYXRhO1xyXG5cclxuXHRcdGxldCBwaG9uZV9tb2RlbCA9IG11bHRpQXJyYXlbMV1bbXVsdGlJbmRleFsxXV07XHJcblx0XHRjb25zb2xlLmxvZyhwaG9uZV9tb2RlbCk7XHJcblx0XHRyZXFHZXRGcmVlRmlsbSh7dG9rZW4scGhvbmVfbW9kZWwsc2VyaWFsX251bWJlcixwaG9uZSxjb2RlfSkudGhlbihcclxuXHRcdFx0KHJlczphbnkpID0+IHtcclxuXHRcdFx0XHR3eC5zaG93VG9hc3Qoe1xyXG4gICAgICAgICAgdGl0bGU6cmVzLm1lc3NhZ2UsXHJcbiAgICAgICAgICBpY29uOidub25lJyxcclxuICAgICAgICAgIGR1cmF0aW9uOjIwMDBcclxuICAgICAgICB9KVxyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fVxyXG5cclxufSk7XHJcbiJdfQ==