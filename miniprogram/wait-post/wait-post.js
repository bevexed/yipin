"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var order_1 = require("../api/order");
Page({
    data: {
        motto: '点击 “编译” 以构建',
        userInfo: {},
        hasUserInfo: false,
        canIUse: wx.canIUse('button.open-type.getUserInfo'),
        info: {},
        pics: [],
        status: '',
        id: '',
        token: ''
    },
    onLoad: function (options) {
        var that = this;
        wx.getStorage({
            key: 'token',
            success: function (res) {
                that.setData({
                    token: res.data
                }, function () {
                    that.getDetail(that.data.token, options.id);
                });
            }
        });
        this.setData({
            status: options.status,
            id: options.id
        });
    },
    getDetail: function (token, id) {
        var _this = this;
        order_1.orderDetail(token, id).then(function (res) {
            _this.setData({
                info: res.data,
                pics: res.data.picture
            });
        });
    },
    faHuo: function () {
        wx.navigateTo({
            url: '../post/post?id=' + this.data.id
        });
    },
    goChild: function (e) {
        wx.navigateTo({
            url: '../childOrder/childOrder?title=' + e.currentTarget.dataset.title + '&note=' + e.currentTarget.dataset.note + '&imei=' + e.currentTarget.dataset.imei + '&level=' + e.currentTarget.dataset.level + '&code=' + e.currentTarget.dataset.code + '&price=' + e.currentTarget.dataset.price
        });
    },
    jieshou: function (e) {
        var that = this;
        order_1.confirmOrder(this.data.token, e.currentTarget.dataset.id, '1').then(function (res) {
            if (res.code == 1) {
                wx.showToast({
                    title: res.message,
                    mask: true,
                    duration: 3000,
                    success: function () {
                        that.getDetail(that.data.token, that.data.id);
                    }
                });
            }
            else {
                wx.showToast({
                    title: '操作失败'
                });
            }
        });
    },
    fouren: function (e) {
        order_1.confirmOrder(this.data.token, e.currentTarget.dataset.id, '2').then(function (res) {
            if (res.code == 1) {
                wx.navigateBack({
                    delta: 1
                });
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FpdC1wb3N0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2FpdC1wb3N0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsc0NBQXNEO0FBRXRELElBQUksQ0FBQztJQUNKLElBQUksRUFBRTtRQUNMLEtBQUssRUFBRSxhQUFhO1FBQ3BCLFFBQVEsRUFBRSxFQUFFO1FBQ1osV0FBVyxFQUFFLEtBQUs7UUFDbEIsT0FBTyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsOEJBQThCLENBQUM7UUFDbkQsSUFBSSxFQUFFLEVBQUU7UUFDUixJQUFJLEVBQUUsRUFBRTtRQUNSLE1BQU0sRUFBRSxFQUFFO1FBQ1YsRUFBRSxFQUFFLEVBQUU7UUFDTixLQUFLLEVBQUUsRUFBRTtLQUNUO0lBQ0QsTUFBTSxFQUFOLFVBQU8sT0FBWTtRQUNsQixJQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbEIsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNiLEdBQUcsRUFBRSxPQUFPO1lBQ1osT0FBTyxFQUFQLFVBQVEsR0FBRztnQkFDVixJQUFJLENBQUMsT0FBUSxDQUFDO29CQUNiLEtBQUssRUFBRSxHQUFHLENBQUMsSUFBSTtpQkFDZixFQUFFO29CQUNGLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUM3QyxDQUFDLENBQUMsQ0FBQTtZQUNILENBQUM7U0FDRCxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ2IsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1lBQ3RCLEVBQUUsRUFBRSxPQUFPLENBQUMsRUFBRTtTQUNkLENBQUMsQ0FBQTtJQUNILENBQUM7SUFDRCxTQUFTLEVBQVQsVUFBVSxLQUFVLEVBQUUsRUFBVTtRQUFoQyxpQkFTQztRQVJBLG1CQUFXLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FDMUIsVUFBQSxHQUFHO1lBQ0YsS0FBSSxDQUFDLE9BQVEsQ0FBQztnQkFDYixJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7Z0JBQ2QsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTzthQUN0QixDQUFDLENBQUE7UUFDSCxDQUFDLENBQ0QsQ0FBQTtJQUNGLENBQUM7SUFFRCxLQUFLO1FBQ0osRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNiLEdBQUcsRUFBRSxrQkFBa0IsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7U0FDdEMsQ0FBQyxDQUFBO0lBQ0gsQ0FBQztJQUVELE9BQU8sRUFBUCxVQUFRLENBQU07UUFDYixFQUFFLENBQUMsVUFBVSxDQUFDO1lBQ2IsR0FBRyxFQUFFLGlDQUFpQyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxRQUFRLEdBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLFFBQVEsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsU0FBUyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxRQUFRLEdBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLFNBQVMsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLO1NBQzVSLENBQUMsQ0FBQTtJQUNILENBQUM7SUFFRCxPQUFPLEVBQVAsVUFBUSxDQUFNO1FBQ2IsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLG9CQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFBLEdBQUc7WUFDdEUsSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRTtnQkFDbEIsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDWixLQUFLLEVBQUUsR0FBRyxDQUFDLE9BQU87b0JBQ2xCLElBQUksRUFBRSxJQUFJO29CQUNWLFFBQVEsRUFBRSxJQUFJO29CQUNkLE9BQU87d0JBQ04sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQU0vQyxDQUFDO2lCQUNELENBQUMsQ0FBQTthQUNGO2lCQUFNO2dCQUNOLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ1osS0FBSyxFQUFFLE1BQU07aUJBQ2IsQ0FBQyxDQUFBO2FBQ0Y7UUFDRixDQUFDLENBQUMsQ0FBQTtJQUNILENBQUM7SUFDRCxNQUFNLEVBQU4sVUFBTyxDQUFNO1FBQ1osb0JBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUEsR0FBRztZQUN0RSxJQUFJLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFO2dCQUNsQixFQUFFLENBQUMsWUFBWSxDQUFDO29CQUNmLEtBQUssRUFBRSxDQUFDO2lCQUNSLENBQUMsQ0FBQTthQUNGO1FBQ0YsQ0FBQyxDQUFDLENBQUE7SUFDSCxDQUFDO0NBQ0QsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy9pbmRleC5qc1xuLy/ojrflj5blupTnlKjlrp7kvotcbmltcG9ydCB7Y29uZmlybU9yZGVyLCBvcmRlckRldGFpbH0gZnJvbSAnLi4vYXBpL29yZGVyJ1xuXG5QYWdlKHtcblx0ZGF0YToge1xuXHRcdG1vdHRvOiAn54K55Ye7IOKAnOe8luivkeKAnSDku6XmnoTlu7onLFxuXHRcdHVzZXJJbmZvOiB7fSxcblx0XHRoYXNVc2VySW5mbzogZmFsc2UsXG5cdFx0Y2FuSVVzZTogd3guY2FuSVVzZSgnYnV0dG9uLm9wZW4tdHlwZS5nZXRVc2VySW5mbycpLFxuXHRcdGluZm86IHt9LFxuXHRcdHBpY3M6IFtdLFxuXHRcdHN0YXR1czogJycsXG5cdFx0aWQ6ICcnLFxuXHRcdHRva2VuOiAnJ1xuXHR9LFxuXHRvbkxvYWQob3B0aW9uczogYW55KSB7XG5cdFx0Y29uc3QgdGhhdCA9IHRoaXM7XG5cdFx0d3guZ2V0U3RvcmFnZSh7XG5cdFx0XHRrZXk6ICd0b2tlbicsXG5cdFx0XHRzdWNjZXNzKHJlcykge1xuXHRcdFx0XHR0aGF0LnNldERhdGEhKHtcblx0XHRcdFx0XHR0b2tlbjogcmVzLmRhdGFcblx0XHRcdFx0fSwgKCkgPT4ge1xuXHRcdFx0XHRcdHRoYXQuZ2V0RGV0YWlsKHRoYXQuZGF0YS50b2tlbiwgb3B0aW9ucy5pZCk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy5zZXREYXRhISh7XG5cdFx0XHRzdGF0dXM6IG9wdGlvbnMuc3RhdHVzLFxuXHRcdFx0aWQ6IG9wdGlvbnMuaWRcblx0XHR9KVxuXHR9LFxuXHRnZXREZXRhaWwodG9rZW46IGFueSwgaWQ6IHN0cmluZykge1xuXHRcdG9yZGVyRGV0YWlsKHRva2VuLCBpZCkudGhlbihcblx0XHRcdHJlcyA9PiB7XG5cdFx0XHRcdHRoaXMuc2V0RGF0YSEoe1xuXHRcdFx0XHRcdGluZm86IHJlcy5kYXRhLFxuXHRcdFx0XHRcdHBpY3M6IHJlcy5kYXRhLnBpY3R1cmVcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHQpXG5cdH0sXG5cdC8vIOWPkei0p1xuXHRmYUh1bygpIHtcblx0XHR3eC5uYXZpZ2F0ZVRvKHtcblx0XHRcdHVybDogJy4uL3Bvc3QvcG9zdD9pZD0nICsgdGhpcy5kYXRhLmlkXG5cdFx0fSlcblx0fSxcblx0Ly8g5a2Q6K6i5Y2VXG5cdGdvQ2hpbGQoZTogYW55KSB7XG5cdFx0d3gubmF2aWdhdGVUbyh7XG5cdFx0XHR1cmw6ICcuLi9jaGlsZE9yZGVyL2NoaWxkT3JkZXI/dGl0bGU9JyArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnRpdGxlICsgJyZub3RlPScgKyBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5ub3RlICsgJyZpbWVpPScgKyBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbWVpICsgJyZsZXZlbD0nICsgZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQubGV2ZWwgKyAnJmNvZGU9JyArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmNvZGUgKyAnJnByaWNlPScgKyBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcmljZVxuXHRcdH0pXG5cdH0sXG5cdC8vIOaOpeWPl+aKpeS7t1xuXHRqaWVzaG91KGU6IGFueSkge1xuXHRcdGxldCB0aGF0ID0gdGhpcztcblx0XHRjb25maXJtT3JkZXIodGhpcy5kYXRhLnRva2VuLCBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pZCwgJzEnKS50aGVuKHJlcyA9PiB7XG5cdFx0XHRpZiAocmVzLmNvZGUgPT0gMSkge1xuXHRcdFx0XHR3eC5zaG93VG9hc3Qoe1xuXHRcdFx0XHRcdHRpdGxlOiByZXMubWVzc2FnZSxcblx0XHRcdFx0XHRtYXNrOiB0cnVlLFxuXHRcdFx0XHRcdGR1cmF0aW9uOiAzMDAwLFxuXHRcdFx0XHRcdHN1Y2Nlc3MoKSB7XG5cdFx0XHRcdFx0XHR0aGF0LmdldERldGFpbCh0aGF0LmRhdGEudG9rZW4sIHRoYXQuZGF0YS5pZCk7XG5cdFx0XHRcdFx0XHQvLyBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdC8vIFx0d3gubmF2aWdhdGVCYWNrKHtcblx0XHRcdFx0XHRcdC8vIFx0XHRkZWx0YTogMVxuXHRcdFx0XHRcdFx0Ly8gXHR9KVxuXHRcdFx0XHRcdFx0Ly8gfSwgMzAwMClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3eC5zaG93VG9hc3Qoe1xuXHRcdFx0XHRcdHRpdGxlOiAn5pON5L2c5aSx6LSlJ1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pXG5cdH0sXG5cdGZvdXJlbihlOiBhbnkpIHtcblx0XHRjb25maXJtT3JkZXIodGhpcy5kYXRhLnRva2VuLCBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pZCwgJzInKS50aGVuKHJlcyA9PiB7XG5cdFx0XHRpZiAocmVzLmNvZGUgPT0gMSkge1xuXHRcdFx0XHR3eC5uYXZpZ2F0ZUJhY2soe1xuXHRcdFx0XHRcdGRlbHRhOiAxXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSlcblx0fVxufSlcbiJdfQ==