"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var order_1 = require("../api/order");
Page({
    data: {
        pics: [],
        status: '',
        id: '',
        token: '',
        orderShow: '',
        noteShow: '',
    },
    onLoad: function (options) {
        var that = this;
        wx.getStorage({
            key: 'token',
            success: function (res) {
                that.setData({
                    token: res.data
                }, function () {
                    that.getDetail(that.data.token, options.id);
                });
            }
        });
        this.setData({
            status: options.status,
            id: options.id
        });
    },
    getDetail: function (token, id) {
        var _this = this;
        order_1.orderDetail(token, id).then(function (res) {
            _this.setData({
                info: res.data,
                pics: res.data.picture
            });
        });
    },
    faHuo: function () {
        wx.navigateTo({
            url: '../post/post?id=' + this.data.id
        });
    },
    goChild: function (e) {
        wx.navigateTo({
            url: '../childOrder/childOrder?title=' + e.currentTarget.dataset.title + '&note=' + e.currentTarget.dataset.note + '&imei=' + e.currentTarget.dataset.imei + '&level=' + e.currentTarget.dataset.level + '&code=' + e.currentTarget.dataset.code + '&price=' + e.currentTarget.dataset.price
        });
    },
    jieshou: function (e) {
        var that = this;
        order_1.confirmOrder(this.data.token, e.currentTarget.dataset.id, '1').then(function (res) {
            if (res.code == 1) {
                wx.showToast({
                    title: res.message,
                    mask: true,
                    duration: 3000,
                    success: function () {
                        that.getDetail(that.data.token, that.data.id);
                    }
                });
            }
            else {
                wx.showToast({
                    title: '操作失败'
                });
            }
        });
    },
    fouren: function (e) {
        var that = this;
        order_1.confirmOrder(this.data.token, e.currentTarget.dataset.id, '2').then(function (res) {
            if (res.code == 1) {
                that.getDetail(that.data.token, that.data.id);
            }
        });
    },
    show: function (e) {
        var _a, _b;
        console.log(e);
        var type = e.currentTarget.dataset.type;
        console.log(type);
        if (this.data[type + 'Show'] === 'open') {
            this.setData((_a = {},
                _a[type + 'Show'] = '',
                _a));
            return;
        }
        console.log(this.data[type + 'Show']);
        this.setData((_b = {},
            _b[type + 'Show'] = 'open',
            _b));
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FpdC1wb3N0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2FpdC1wb3N0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsc0NBQXNEO0FBRXRELElBQUksQ0FBQztJQUNKLElBQUksRUFBRTtRQUNMLElBQUksRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLEVBQUU7UUFDVixFQUFFLEVBQUUsRUFBRTtRQUNOLEtBQUssRUFBRSxFQUFFO1FBRVQsU0FBUyxFQUFFLEVBQUU7UUFDYixRQUFRLEVBQUUsRUFBRTtLQUNaO0lBQ0QsTUFBTSxFQUFOLFVBQU8sT0FBWTtRQUNsQixJQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbEIsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNiLEdBQUcsRUFBRSxPQUFPO1lBQ1osT0FBTyxFQUFQLFVBQVEsR0FBRztnQkFDVixJQUFJLENBQUMsT0FBUSxDQUFDO29CQUNiLEtBQUssRUFBRSxHQUFHLENBQUMsSUFBSTtpQkFDZixFQUFFO29CQUNGLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUM3QyxDQUFDLENBQUMsQ0FBQTtZQUNILENBQUM7U0FDRCxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ2IsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1lBQ3RCLEVBQUUsRUFBRSxPQUFPLENBQUMsRUFBRTtTQUNkLENBQUMsQ0FBQTtJQUNILENBQUM7SUFDRCxTQUFTLEVBQVQsVUFBVSxLQUFVLEVBQUUsRUFBVTtRQUFoQyxpQkFTQztRQVJBLG1CQUFXLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FDMUIsVUFBQSxHQUFHO1lBQ0YsS0FBSSxDQUFDLE9BQVEsQ0FBQztnQkFDYixJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7Z0JBQ2QsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJ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QUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFFdEMsSUFBSSxDQUFDLE9BQVE7WUFDWixHQUFDLElBQUksR0FBRyxNQUFNLElBQUcsTUFBTTtnQkFDdEIsQ0FBQTtJQUNILENBQUM7Q0FDRCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvL2luZGV4LmpzXG4vL+iOt+WPluW6lOeUqOWunuS+i1xuaW1wb3J0IHtjb25maXJtT3JkZXIsIG9yZGVyRGV0YWlsfSBmcm9tICcuLi9hcGkvb3JkZXInXG5cblBhZ2Uoe1xuXHRkYXRhOiB7XG5cdFx0cGljczogW10sXG5cdFx0c3RhdHVzOiAnJyxcblx0XHRpZDogJycsXG5cdFx0dG9rZW46ICcnLFxuXG5cdFx0b3JkZXJTaG93OiAnJyxcblx0XHRub3RlU2hvdzogJycsXG5cdH0sXG5cdG9uTG9hZChvcHRpb25zOiBhbnkpIHtcblx0XHRjb25zdCB0aGF0ID0gdGhpcztcblx0XHR3eC5nZXRTdG9yYWdlKHtcblx0XHRcdGtleTogJ3Rva2VuJyxcblx0XHRcdHN1Y2Nlc3MocmVzKSB7XG5cdFx0XHRcdHRoYXQuc2V0RGF0YSEoe1xuXHRcdFx0XHRcdHRva2VuOiByZXMuZGF0YVxuXHRcdFx0XHR9LCAoKSA9PiB7XG5cdFx0XHRcdFx0dGhhdC5nZXREZXRhaWwodGhhdC5kYXRhLnRva2VuLCBvcHRpb25zLmlkKTtcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9KTtcblx0XHR0aGlzLnNldERhdGEhKHtcblx0XHRcdHN0YXR1czogb3B0aW9ucy5zdGF0dXMsXG5cdFx0XHRpZDogb3B0aW9ucy5pZFxuXHRcdH0pXG5cdH0sXG5cdGdldERldGFpbCh0b2tlbjogYW55LCBpZDogc3RyaW5nKSB7XG5cdFx0b3JkZXJEZXRhaWwodG9rZW4sIGlkKS50aGVuKFxuXHRcdFx0cmVzID0+IHtcblx0XHRcdFx0dGhpcy5zZXREYXRhISh7XG5cdFx0XHRcdFx0aW5mbzogcmVzLmRhdGEsXG5cdFx0XHRcdFx0cGljczogcmVzLmRhdGEucGljdHVyZVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdClcblx0fSxcblx0Ly8g5Y+R6LSnXG5cdGZhSHVvKCkge1xuXHRcdHd4Lm5hdmlnYXRlVG8oe1xuXHRcdFx0dXJsOiAnLi4vcG9zdC9wb3N0P2lkPScgKyB0aGlzLmRhdGEuaWRcblx0XHR9KVxuXHR9LFxuXHQvLyDlrZDorqLljZVcblx0Z29DaGlsZChlOiBhbnkpIHtcblx0XHR3eC5uYXZpZ2F0ZVRvKHtcblx0XHRcdHVybDogJy4uL2NoaWxkT3JkZXIvY2hpbGRPcmRlcj90aXRsZT0nICsgZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudGl0bGUgKyAnJm5vdGU9JyArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0Lm5vdGUgKyAnJmltZWk9JyArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmltZWkgKyAnJmxldmVsPScgKyBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5sZXZlbCArICcmY29kZT0nICsgZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY29kZSArICcmcHJpY2U9JyArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnByaWNlXG5cdFx0fSlcblx0fSxcblx0Ly8g5o6l5Y+X5oql5Lu3XG5cdGppZXNob3UoZTogYW55KSB7XG5cdFx0bGV0IHRoYXQgPSB0aGlzO1xuXHRcdGNvbmZpcm1PcmRlcih0aGlzLmRhdGEudG9rZW4sIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmlkLCAnMScpLnRoZW4ocmVzID0+IHtcblx0XHRcdGlmIChyZXMuY29kZSA9PSAxKSB7XG5cdFx0XHRcdHd4LnNob3dUb2FzdCh7XG5cdFx0XHRcdFx0dGl0bGU6IHJlcy5tZXNzYWdlLFxuXHRcdFx0XHRcdG1hc2s6IHRydWUsXG5cdFx0XHRcdFx0ZHVyYXRpb246IDMwMDAsXG5cdFx0XHRcdFx0c3VjY2VzcygpIHtcblx0XHRcdFx0XHRcdHRoYXQuZ2V0RGV0YWlsKHRoYXQuZGF0YS50b2tlbiwgdGhhdC5kYXRhLmlkKTtcblx0XHRcdFx0XHRcdC8vIHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly8gXHR3eC5uYXZpZ2F0ZUJhY2soe1xuXHRcdFx0XHRcdFx0Ly8gXHRcdGRlbHRhOiAxXG5cdFx0XHRcdFx0XHQvLyBcdH0pXG5cdFx0XHRcdFx0XHQvLyB9LCAzMDAwKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHd4LnNob3dUb2FzdCh7XG5cdFx0XHRcdFx0dGl0bGU6ICfmk43kvZzlpLHotKUnXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSlcblx0fSxcblxuXHRmb3VyZW4oZTogYW55KSB7XG5cdFx0bGV0IHRoYXQgPSB0aGlzO1xuXG5cdFx0Y29uZmlybU9yZGVyKHRoaXMuZGF0YS50b2tlbiwgZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaWQsICcyJykudGhlbihyZXMgPT4ge1xuXHRcdFx0aWYgKHJlcy5jb2RlID09IDEpIHtcblx0XHRcdFx0dGhhdC5nZXREZXRhaWwodGhhdC5kYXRhLnRva2VuLCB0aGF0LmRhdGEuaWQpO1xuXHRcdFx0Ly8gXHR3eC5uYXZpZ2F0ZUJhY2soe1xuXHRcdFx0Ly8gXHRcdGRlbHRhOiAxXG5cdFx0XHQvLyBcdH0pXG5cdFx0XHR9XG5cdFx0fSlcblx0fSxcblx0c2hvdyhlOiBhbnkpIHtcblx0XHRjb25zb2xlLmxvZyhlKTtcblxuXHRcdGxldCB0eXBlID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZTtcblxuXHRcdGNvbnNvbGUubG9nKHR5cGUpO1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRpZiAodGhpcy5kYXRhW3R5cGUgKyAnU2hvdyddID09PSAnb3BlbicpIHtcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdHRoaXMuc2V0RGF0YSEoe1xuXHRcdFx0XHRbdHlwZSArICdTaG93J106ICcnXG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXHRcdC8vQHRzLWlnbm9yZVxuXHRcdGNvbnNvbGUubG9nKHRoaXMuZGF0YVt0eXBlICsgJ1Nob3cnXSk7XG5cblx0XHR0aGlzLnNldERhdGEhKHtcblx0XHRcdFt0eXBlICsgJ1Nob3cnXTogJ29wZW4nXG5cdFx0fSlcblx0fVxufSlcbiJdfQ==