"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var order_1 = require("../api/order");
Page({
    data: {
        pics: [],
        status: '',
        id: '',
        token: '',
        orderShow: 'open',
        noteShow: 'open',
    },
    onLoad: function (options) {
        var that = this;
        wx.getStorage({
            key: 'token',
            success: function (res) {
                that.setData({
                    token: res.data
                }, function () {
                    that.getDetail(that.data.token, options.id);
                });
            }
        });
        this.setData({
            status: options.status,
            id: options.id
        });
    },
    getDetail: function (token, id) {
        var _this = this;
        order_1.orderDetail(token, id).then(function (res) {
            _this.setData({
                info: res.data,
                pics: res.data.picture
            });
        });
    },
    faHuo: function () {
        wx.navigateTo({
            url: '../post/post?id=' + this.data.id
        });
    },
    goChild: function (e) {
        wx.navigateTo({
            url: '../childOrder/childOrder?title=' + e.currentTarget.dataset.title + '&note=' + e.currentTarget.dataset.note + '&imei=' + e.currentTarget.dataset.imei + '&level=' + e.currentTarget.dataset.level + '&code=' + e.currentTarget.dataset.code + '&price=' + e.currentTarget.dataset.price
        });
    },
    jieshou: function (e) {
        var that = this;
        order_1.confirmOrder(this.data.token, e.currentTarget.dataset.id, '1').then(function (res) {
            if (res.code == 1) {
                wx.showToast({
                    title: res.message,
                    mask: true,
                    duration: 3000,
                    success: function () {
                        that.getDetail(that.data.token, that.data.id);
                    }
                });
            }
            else {
                wx.showToast({
                    title: '操作失败'
                });
            }
        });
    },
    fouren: function (e) {
        var that = this;
        order_1.confirmOrder(this.data.token, e.currentTarget.dataset.id, '2').then(function (res) {
            if (res.code == 1) {
                that.getDetail(that.data.token, that.data.id);
            }
        });
    },
    show: function (e) {
        var _a, _b;
        console.log(e);
        var type = e.currentTarget.dataset.type;
        console.log(type);
        if (this.data[type + 'Show'] === 'open') {
            this.setData((_a = {},
                _a[type + 'Show'] = '',
                _a));
            return;
        }
        console.log(this.data[type + 'Show']);
        this.setData((_b = {},
            _b[type + 'Show'] = 'open',
            _b));
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FpdC1wb3N0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2FpdC1wb3N0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsc0NBQXNEO0FBRXRELElBQUksQ0FBQztJQUNKLElBQUksRUFBRTtRQUNMLElBQUksRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLEVBQUU7UUFDVixFQUFFLEVBQUUsRUFBRTtRQUNOLEtBQUssRUFBRSxFQUFFO1FBRVQsU0FBUyxFQUFFLE1BQU07UUFDakIsUUFBUSxFQUFFLE1BQU07S0FDaEI7SUFDRCxNQUFNLEVBQU4sVUFBTyxPQUFZO1FBQ2xCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQztRQUNsQixFQUFFLENBQUMsVUFBVSxDQUFDO1lBQ2IsR0FBRyxFQUFFLE9BQU87WUFDWixPQUFPLEVBQVAsVUFBUSxHQUFHO2dCQUNWLElBQUksQ0FBQyxPQUFRLENBQUM7b0JBQ2IsS0FBSyxFQUFFLEdBQUcsQ0FBQyxJQUFJO2lCQUNmLEVBQUU7b0JBQ0YsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQzdDLENBQUMsQ0FBQyxDQUFBO1lBQ0gsQ0FBQztTQUNELENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxPQUFRLENBQUM7WUFDYixNQUFNLEVBQUUsT0FBTyxDQUFDLE1BQU07WUFDdEIsRUFBRSxFQUFFLE9BQU8sQ0FBQyxFQUFFO1NBQ2QsQ0FBQyxDQUFBO0lBQ0gsQ0FBQztJQUNELFNBQVMsRUFBVCxVQUFVLEtBQVUsRUFBRSxFQUFVO1FBQWhDLGlCQVNDO1FBUkEsbUJBQVcsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUMxQixVQUFBLEdBQUc7WUFDRixLQUFJLENBQUMsT0FBUSxDQUFDO2dCQUNiLElBQUksRUFBRSxHQUFHLENBQUMsSUFBSTtnQkFDZCxJQUFJLEVBQUUsR0FBRyxDQUFDLElB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LENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUV0QyxJQUFJLENBQUMsT0FBUTtZQUNaLEdBQUMsSUFBSSxHQUFHLE1BQU0sSUFBRyxNQUFNO2dCQUN0QixDQUFBO0lBQ0gsQ0FBQztDQUNELENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vaW5kZXguanNcbi8v6I635Y+W5bqU55So5a6e5L6LXG5pbXBvcnQge2NvbmZpcm1PcmRlciwgb3JkZXJEZXRhaWx9IGZyb20gJy4uL2FwaS9vcmRlcidcblxuUGFnZSh7XG5cdGRhdGE6IHtcblx0XHRwaWNzOiBbXSxcblx0XHRzdGF0dXM6ICcnLFxuXHRcdGlkOiAnJyxcblx0XHR0b2tlbjogJycsXG5cblx0XHRvcmRlclNob3c6ICdvcGVuJyxcblx0XHRub3RlU2hvdzogJ29wZW4nLFxuXHR9LFxuXHRvbkxvYWQob3B0aW9uczogYW55KSB7XG5cdFx0Y29uc3QgdGhhdCA9IHRoaXM7XG5cdFx0d3guZ2V0U3RvcmFnZSh7XG5cdFx0XHRrZXk6ICd0b2tlbicsXG5cdFx0XHRzdWNjZXNzKHJlcykge1xuXHRcdFx0XHR0aGF0LnNldERhdGEhKHtcblx0XHRcdFx0XHR0b2tlbjogcmVzLmRhdGFcblx0XHRcdFx0fSwgKCkgPT4ge1xuXHRcdFx0XHRcdHRoYXQuZ2V0RGV0YWlsKHRoYXQuZGF0YS50b2tlbiwgb3B0aW9ucy5pZCk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy5zZXREYXRhISh7XG5cdFx0XHRzdGF0dXM6IG9wdGlvbnMuc3RhdHVzLFxuXHRcdFx0aWQ6IG9wdGlvbnMuaWRcblx0XHR9KVxuXHR9LFxuXHRnZXREZXRhaWwodG9rZW46IGFueSwgaWQ6IHN0cmluZykge1xuXHRcdG9yZGVyRGV0YWlsKHRva2VuLCBpZCkudGhlbihcblx0XHRcdHJlcyA9PiB7XG5cdFx0XHRcdHRoaXMuc2V0RGF0YSEoe1xuXHRcdFx0XHRcdGluZm86IHJlcy5kYXRhLFxuXHRcdFx0XHRcdHBpY3M6IHJlcy5kYXRhLnBpY3R1cmVcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHQpXG5cdH0sXG5cdC8vIOWPkei0p1xuXHRmYUh1bygpIHtcblx0XHR3eC5uYXZpZ2F0ZVRvKHtcblx0XHRcdHVybDogJy4uL3Bvc3QvcG9zdD9pZD0nICsgdGhpcy5kYXRhLmlkXG5cdFx0fSlcblx0fSxcblx0Ly8g5a2Q6K6i5Y2VXG5cdGdvQ2hpbGQoZTogYW55KSB7XG5cdFx0d3gubmF2aWdhdGVUbyh7XG5cdFx0XHR1cmw6ICcuLi9jaGlsZE9yZGVyL2NoaWxkT3JkZXI/dGl0bGU9JyArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnRpdGxlICsgJyZub3RlPScgKyBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5ub3RlICsgJyZpbWVpPScgKyBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbWVpICsgJyZsZXZlbD0nICsgZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQubGV2ZWwgKyAnJmNvZGU9JyArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmNvZGUgKyAnJnByaWNlPScgKyBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcmljZVxuXHRcdH0pXG5cdH0sXG5cdC8vIOaOpeWPl+aKpeS7t1xuXHRqaWVzaG91KGU6IGFueSkge1xuXHRcdGxldCB0aGF0ID0gdGhpcztcblx0XHRjb25maXJtT3JkZXIodGhpcy5kYXRhLnRva2VuLCBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pZCwgJzEnKS50aGVuKHJlcyA9PiB7XG5cdFx0XHRpZiAocmVzLmNvZGUgPT0gMSkge1xuXHRcdFx0XHR3eC5zaG93VG9hc3Qoe1xuXHRcdFx0XHRcdHRpdGxlOiByZXMubWVzc2FnZSxcblx0XHRcdFx0XHRtYXNrOiB0cnVlLFxuXHRcdFx0XHRcdGR1cmF0aW9uOiAzMDAwLFxuXHRcdFx0XHRcdHN1Y2Nlc3MoKSB7XG5cdFx0XHRcdFx0XHR0aGF0LmdldERldGFpbCh0aGF0LmRhdGEudG9rZW4sIHRoYXQuZGF0YS5pZCk7XG5cdFx0XHRcdFx0XHQvLyBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdC8vIFx0d3gubmF2aWdhdGVCYWNrKHtcblx0XHRcdFx0XHRcdC8vIFx0XHRkZWx0YTogMVxuXHRcdFx0XHRcdFx0Ly8gXHR9KVxuXHRcdFx0XHRcdFx0Ly8gfSwgMzAwMClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3eC5zaG93VG9hc3Qoe1xuXHRcdFx0XHRcdHRpdGxlOiAn5pON5L2c5aSx6LSlJ1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pXG5cdH0sXG5cblx0Zm91cmVuKGU6IGFueSkge1xuXHRcdGxldCB0aGF0ID0gdGhpcztcblxuXHRcdGNvbmZpcm1PcmRlcih0aGlzLmRhdGEudG9rZW4sIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmlkLCAnMicpLnRoZW4ocmVzID0+IHtcblx0XHRcdGlmIChyZXMuY29kZSA9PSAxKSB7XG5cdFx0XHRcdHRoYXQuZ2V0RGV0YWlsKHRoYXQuZGF0YS50b2tlbiwgdGhhdC5kYXRhLmlkKTtcblx0XHRcdC8vIFx0d3gubmF2aWdhdGVCYWNrKHtcblx0XHRcdC8vIFx0XHRkZWx0YTogMVxuXHRcdFx0Ly8gXHR9KVxuXHRcdFx0fVxuXHRcdH0pXG5cdH0sXG5cdHNob3coZTogYW55KSB7XG5cdFx0Y29uc29sZS5sb2coZSk7XG5cblx0XHRsZXQgdHlwZSA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGU7XG5cblx0XHRjb25zb2xlLmxvZyh0eXBlKTtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0aWYgKHRoaXMuZGF0YVt0eXBlICsgJ1Nob3cnXSA9PT0gJ29wZW4nKSB7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHR0aGlzLnNldERhdGEhKHtcblx0XHRcdFx0W3R5cGUgKyAnU2hvdyddOiAnJ1xuXHRcdFx0fSlcblx0XHRcdHJldHVyblxuXHRcdH1cblx0XHQvL0B0cy1pZ25vcmVcblx0XHRjb25zb2xlLmxvZyh0aGlzLmRhdGFbdHlwZSArICdTaG93J10pO1xuXG5cdFx0dGhpcy5zZXREYXRhISh7XG5cdFx0XHRbdHlwZSArICdTaG93J106ICdvcGVuJ1xuXHRcdH0pXG5cdH1cbn0pXG4iXX0=