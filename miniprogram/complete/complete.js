"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = require("../api/index");
Page({
    data: {
        phone: '',
        code: '',
        msgData: '获取验证码',
        time: 60,
        timer: 0,
        active: ''
    },
    doLogin: function () {
        var data = {
            openid: 123456789, phone: 123123123123, password: 123123123, code: 123213123
        };
        index_1.reqRegister(data).then(function (res) {
            console.log(res);
            wx.switchTab({
                url: '/pages/index/index'
            });
        });
    },
    changePhone: function (e) {
        console.log(e);
        this.setData({
            phone: e.detail.value
        });
    },
    changeCode: function (e) {
        console.log(e);
        this.setData({
            code: e.detail.value
        });
        console.log(this.data.code);
    },
    doSendMsg: function () {
        var _this = this;
        var _a = this.data, time = _a.time, timer = _a.timer;
        if (timer !== 0) {
            return;
        }
        var mobile = this.data.phone;
        var type = 'SMS_166320348';
        index_1.sendMsg({ type: type, mobile: mobile }).then(function (res) {
            if (res.code === 1) {
                timer = setInterval(function () {
                    if (time === 0) {
                        clearInterval(timer);
                        _this.setData({
                            timer: 0,
                            time: 60,
                            msgData: '获取验证码',
                            active: ''
                        });
                        return;
                    }
                    time--;
                    _this.setData({
                        msgData: time + 's',
                        timer: timer,
                        active: 'active'
                    });
                }, 1000);
            }
        });
    },
    toIndex: function () {
        wx.navigateTo({
            url: '/pages/index/index'
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcGxldGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb21wbGV0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUFpRDtBQUVqRCxJQUFJLENBQUM7SUFDSixJQUFJLEVBQUU7UUFDTCxLQUFLLEVBQUUsRUFBRTtRQUNULElBQUksRUFBRSxFQUFFO1FBQ1IsT0FBTyxFQUFFLE9BQU87UUFDaEIsSUFBSSxFQUFFLEVBQUU7UUFDUixLQUFLLEVBQUUsQ0FBQztRQUNSLE1BQU0sRUFBRSxFQUFFO0tBQ1Y7SUFDRCxPQUFPO1FBQ04sSUFBSSxJQUFJLEdBQUc7WUFDVixNQUFNLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsU0FBUztTQUM1RSxDQUFDO1FBR0YsbUJBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQ3JCLFVBQUEsR0FBRztZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDakIsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDWixHQUFHLEVBQUUsb0JBQW9CO2FBQ3pCLENBQUMsQ0FBQTtRQUNILENBQUMsQ0FDRCxDQUFDO0lBQ0gsQ0FBQztJQUNELFdBQVcsRUFBRSxVQUFVLENBQUs7UUFDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxPQUFRLENBQUM7WUFDYixLQUFLLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1NBQ3JCLENBQUMsQ0FBQztJQUNKLENBQUM7SUFDRCxVQUFVLEVBQUUsVUFBVSxDQUFLO1FBQzFCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ2IsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSztTQUNwQixDQUFDLENBQUM7UUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUNELFNBQVMsRUFBRTtRQUNWLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO1FBQ3JELElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtZQUNoQixPQUFPO1NBQ1A7UUFFRCxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUMvQixJQUFNLElBQUksR0FBRyxlQUFlLENBQUM7UUFDN0IsZUFBTyxDQUFDLEVBQUMsSUFBSSxNQUFBLEVBQUUsTUFBTSxRQUFBLEVBQUMsQ0FBQyxDQUFDLElBQUksQ0FDM0IsVUFBQyxHQUFRO1lBQ1IsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRTtnQkFFbkIsS0FBSyxHQUFHLFdBQVcsQ0FBQztvQkFDbkIsSUFBSSxJQUFJLEtBQUssQ0FBQyxFQUFFO3dCQUNmLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDckIsS0FBSyxDQUFDLE9BQVEsQ0FBQzs0QkFDZCxLQUFLLEVBQUUsQ0FBQzs0QkFDUixJQUFJLEVBQUUsRUFBRTs0QkFDUixPQUFPLEVBQUUsT0FBTzs0QkFDaEIsTUFBTSxFQUFFLEVBQUU7eUJBQ1YsQ0FBQyxDQUFDO3dCQUNILE9BQU87cUJBQ1A7b0JBQ0QsSUFBSSxFQUFFLENBQUM7b0JBQ1AsS0FBSyxDQUFDLE9BQVEsQ0FBQzt3QkFDZCxPQUFPLEVBQUUsSUFBSSxHQUFHLEdBQUc7d0JBQ25CLEtBQUssRUFBRSxLQUFLO3dCQUNaLE1BQU0sRUFBRSxRQUFRO3FCQUNoQixDQUFDLENBQUM7Z0JBQ0osQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ1Q7UUFDRixDQUFDLENBQ0QsQ0FBQztJQUdILENBQUM7SUFDRCxPQUFPLEVBQUU7UUFDUixFQUFFLENBQUMsVUFBVSxDQUFDO1lBQ2IsR0FBRyxFQUFFLG9CQUFvQjtTQUN6QixDQUFDLENBQUM7SUFDSixDQUFDO0NBQ0QsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtzZW5kTXNnLHJlcVJlZ2lzdGVyfSBmcm9tIFwiLi4vYXBpL2luZGV4XCI7XG5cblBhZ2Uoe1xuXHRkYXRhOiB7XG5cdFx0cGhvbmU6ICcnLFxuXHRcdGNvZGU6ICcnLFxuXHRcdG1zZ0RhdGE6ICfojrflj5bpqozor4HnoIEnLFxuXHRcdHRpbWU6IDYwLFxuXHRcdHRpbWVyOiAwLFxuXHRcdGFjdGl2ZTogJydcblx0fSxcblx0ZG9Mb2dpbigpe1xuXHRcdGxldCBkYXRhID0ge1xuXHRcdFx0b3BlbmlkOiAxMjM0NTY3ODksIHBob25lOiAxMjMxMjMxMjMxMjMsIHBhc3N3b3JkOiAxMjMxMjMxMjMsIGNvZGU6IDEyMzIxMzEyM1xuXHRcdH07XG5cblxuXHRcdHJlcVJlZ2lzdGVyKGRhdGEpLnRoZW4oXG5cdFx0XHRyZXMgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXMpO1xuXHRcdFx0XHR3eC5zd2l0Y2hUYWIoe1xuXHRcdFx0XHRcdHVybDogJy9wYWdlcy9pbmRleC9pbmRleCdcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHQpO1xuXHR9LFxuXHRjaGFuZ2VQaG9uZTogZnVuY3Rpb24gKGU6YW55KSB7XG5cdFx0Y29uc29sZS5sb2coZSk7XG5cdFx0dGhpcy5zZXREYXRhISh7XG5cdFx0XHRwaG9uZTogZS5kZXRhaWwudmFsdWVcblx0XHR9KTtcblx0fSxcblx0Y2hhbmdlQ29kZTogZnVuY3Rpb24gKGU6YW55KSB7XG5cdFx0Y29uc29sZS5sb2coZSk7XG5cdFx0dGhpcy5zZXREYXRhISh7XG5cdFx0XHRjb2RlOiBlLmRldGFpbC52YWx1ZVxuXHRcdH0pO1xuXHRcdGNvbnNvbGUubG9nKHRoaXMuZGF0YS5jb2RlKTtcblx0fSxcblx0ZG9TZW5kTXNnOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgX2EgPSB0aGlzLmRhdGEsIHRpbWUgPSBfYS50aW1lLCB0aW1lciA9IF9hLnRpbWVyO1xuXHRcdGlmICh0aW1lciAhPT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IG1vYmlsZSA9IHRoaXMuZGF0YS5waG9uZTtcblx0XHRjb25zdCB0eXBlID0gJ1NNU18xNjYzMjAzNDgnO1xuXHRcdHNlbmRNc2coe3R5cGUsIG1vYmlsZX0pLnRoZW4oXG5cdFx0XHQocmVzOiBhbnkpID0+IHtcblx0XHRcdFx0aWYgKHJlcy5jb2RlID09PSAxKSB7XG5cblx0XHRcdFx0XHR0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGlmICh0aW1lID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXIpO1xuXHRcdFx0XHRcdFx0XHRfdGhpcy5zZXREYXRhISh7XG5cdFx0XHRcdFx0XHRcdFx0dGltZXI6IDAsXG5cdFx0XHRcdFx0XHRcdFx0dGltZTogNjAsXG5cdFx0XHRcdFx0XHRcdFx0bXNnRGF0YTogJ+iOt+WPlumqjOivgeeggScsXG5cdFx0XHRcdFx0XHRcdFx0YWN0aXZlOiAnJ1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGltZS0tO1xuXHRcdFx0XHRcdFx0X3RoaXMuc2V0RGF0YSEoe1xuXHRcdFx0XHRcdFx0XHRtc2dEYXRhOiB0aW1lICsgJ3MnLFxuXHRcdFx0XHRcdFx0XHR0aW1lcjogdGltZXIsXG5cdFx0XHRcdFx0XHRcdGFjdGl2ZTogJ2FjdGl2ZSdcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sIDEwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0KTtcblxuXG5cdH0sXG5cdHRvSW5kZXg6IGZ1bmN0aW9uICgpIHtcblx0XHR3eC5uYXZpZ2F0ZVRvKHtcblx0XHRcdHVybDogJy9wYWdlcy9pbmRleC9pbmRleCdcblx0XHR9KTtcblx0fVxufSk7XG4iXX0=